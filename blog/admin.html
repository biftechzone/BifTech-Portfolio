<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>BifTech Blog | Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:#020617;
  color:#e5e7eb;
}
.box{
  max-width:900px;
  margin:60px auto;
  padding:30px;
  border:1px solid #1e293b;
  border-radius:14px;
}
input,textarea{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  background:#020617;
  border:1px solid #1e293b;
  border-radius:8px;
  color:#e5e7eb;
}
textarea{min-height:160px}
button{
  padding:10px 16px;
  border:none;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
}
.primary{background:#38bdf8;color:#020617}
.ghost{
  background:transparent;
  border:1px solid #1e293b;
  color:#94a3b8;
}
.ghost:hover{border-color:#38bdf8;color:#38bdf8}
.hidden{display:none}
pre{
  background:#020617;
  border:1px solid #1e293b;
  padding:15px;
  border-radius:10px;
  overflow:auto;
  font-size:.85rem;
  white-space:pre-wrap;
}
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="box hidden" id="login">
  <h2>Admin Giriş</h2>
  <input type="password" id="pw" placeholder="Şifre">
  <button class="primary" onclick="login()">Giriş</button>
</div>

<!-- ADMIN -->
<div class="box hidden" id="admin">

<div class="top">
  <h2>Post Ekle</h2>
  <button class="ghost" onclick="logout()">Çıkış</button>
</div>

<input id="title" placeholder="Post başlığı">
<input id="slug" placeholder="Slug (ornegin: vercel-domain)">
<input id="tags" placeholder="Etiketler (virgülle)">
<textarea id="content" placeholder="Post içeriği"></textarea>

<button class="primary" onclick="addPost()">Postu Listeye Ekle</button>

<h3 style="margin-top:30px">posts.json (TAM HALİ)</h3>
<pre id="jsonOutput">[]</pre>

<button class="ghost" onclick="copyAll()">posts.json'u Kopyala</button>

</div>

<script>
const PASS="biftech123";
const KEY="biftech_admin";

const loginBox=document.getElementById("login");
const adminBox=document.getElementById("admin");

if(localStorage.getItem(KEY)){
  adminBox.classList.remove("hidden");
}else{
  loginBox.classList.remove("hidden");
}

function login(){
  if(document.getElementById("pw").value===PASS){
    localStorage.setItem(KEY,"1");
    location.reload();
  }else alert("Şifre yanlış");
}
function logout(){
  localStorage.removeItem(KEY);
  location.reload();
}

/* POSTS ARRAY */
let posts=[];

function addPost(){
  const title=document.getElementById("title").value.trim();
  const slug=document.getElementById("slug").value.trim();
  const content=document.getElementById("content").value.trim();
  const tags=document.getElementById("tags").value
    .split(",")
    .map(t=>t.trim())
    .filter(Boolean);

  if(!title||!slug||!content){
    alert("Başlık, slug ve içerik zorunlu");
    return;
  }

  const post={
    id:slug,
    title:title,
    date:new Date().toLocaleDateString("tr-TR"),
    tags:tags,
    content:content
  };

  posts.unshift(post); // EN ÜSTE EKLER
  renderJSON();

  document.getElementById("title").value="";
  document.getElementById("slug").value="";
  document.getElementById("tags").value="";
  document.getElementById("content").value="";
}

function renderJSON(){
  document.getElementById("jsonOutput").textContent=
    JSON.stringify(posts,null,2);
}

function copyAll(){
  navigator.clipboard.writeText(
    document.getElementById("jsonOutput").textContent
  );
  alert("posts.json kopyalandı");
}
</script>

</body>
</html>
